<app-header name="Joey Doe"/>
<main class="mainPadding mt-2">
  <div class="rounded-border p-2" style="background-color: #F4F7FB">
    <app-nav/>
    <img ngSrc="Dashboard.svg"
         width="1332" height="363"
         class="h-full w-full object-cover"
         alt="Logo"
    />
    <div class="mt-3 pt-4 p-2 bg-white rounded-border">
      <h1 class="title">
        Shared Recipes
      </h1>
      <sub>
        All shared Recipes
      </sub>
      <form [formGroup]="searchRecipeForm"
            (ngSubmit)="submitSearch()">
        <div class="flex flex-col gap-2 w-full space mb-4">
          <label for="searchWord">Search Recipe</label>
          <input pInputText id="searchWord" type="text" formControlName="searchWord" placeholder="Search"/>
          <p-message variant="simple"
                     severity="error"
                     size="small"
                     *ngIf="searchWord?.dirty && searchWord?.hasError('required')"
          >
            Field is required
          </p-message>
          <p-button
                    label="Search"
                    severity="primary"
                    variant="outlined"
                    class="w-full border-gray-600"
                    styleClass=" mx-auto !border-gray-300"
                    type="submit"
          />
        </div>
      </form>
      <div *ngIf="recipes().length > 0">
        <p-dataView #dv [value]="recipes()" align="align" styleClass="">
          <ng-template #list let-items>
            <div class="grid gap-4 grid-nogutter">
              <p-card *ngFor="let recipe of items " [header]="recipe.title" [subheader]="recipe.tags">
                <div class="grid grid-cols-3 gap-2">
                  <p class="col-span-2">
                    <b>Cooking time:</b> {{recipe.cookingTime}}
                    <br>
                    <br>
                    <b>Ingredients:</b> <br> {{recipe.ingredients}}
                    <br>
                    <br>
                   <b> Cooking steps:</b>
                    <br>
                    <br>
                    <textarea pTextarea
                              rows="8"
                              class="w-full inline-block"
                              readonly
                              style="text-align: left"
                    >{{recipe.steps}}</textarea>
                  </p>

                  <div class="grid grid-cols-2 col-span-1">
                    <p-button label="Update Recipe" severity="warn" (onClick)="updateRecipePage(recipe.id)"
                    />

                    <p-button label="Delete Recipe" severity="danger" (onClick)="deleteRecipeDialog(recipe)"
                    />
                  </div>
                </div>
              </p-card>
            </div>
          </ng-template>
        </p-dataView>
      </div>
      <div *ngIf="recipes().length <= 0">
        <p class="text-center py-5 ">The are currently no recipes to show</p>
      </div>
    </div>
  </div>
</main>
<div class="card flex justify-center">
  <p-dialog header="Delete Recipe" [modal]="true" [(visible)]="dialogModel.showDialog" [style]="{ width: '25rem' }">
<!--    <span class="p-text-secondary block mb-8">Update your information.</span>-->
    <p class="flex items-center gap-4 mb-4">
      Are you sure you would like to delete the {{dialogModel.recipe.title}} recipe
    </p>
    <div class="flex justify-end gap-2">
      <p-button label="Cancel" severity="secondary" (click)="dialogModel.showDialog = false" />
      <p-button label="Delete" severity="danger" (click)="deleteRecipe()" />
    </div>
  </p-dialog>
</div>
<p-toast />
